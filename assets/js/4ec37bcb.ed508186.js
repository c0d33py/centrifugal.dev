"use strict";(self.webpackChunkcentrifugal_dev=self.webpackChunkcentrifugal_dev||[]).push([[8899],{3905:(e,t,o)=>{o.d(t,{Zo:()=>u,kt:()=>p});var r=o(67294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var l=r.createContext({}),c=function(e){var t=r.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(o),p=n,m=d["".concat(l,".").concat(p)]||d[p]||h[p]||i;return o?r.createElement(m,a(a({ref:t},u),{},{components:o})):r.createElement(m,a({ref:t},u))}));function p(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=o.length,a=new Array(i);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,a[1]=s;for(var c=2;c<i;c++)a[c]=o[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,o)}d.displayName="MDXCreateElement"},75861:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=o(87462),n=(o(67294),o(3905));const i={id:"layout",sidebar_label:"App layout and behavior",title:"App layout and behavior"},a=void 0,s={unversionedId:"tutorial/layout",id:"tutorial/layout",title:"App layout and behavior",description:"Before we start, we would like the reader to be more familiar with the layout and behavior of the application we are creating here. Let's look at it screen by screen, describe the behavior, and explain which parts will be endowed with real-time superpowers.",source:"@site/docs/tutorial/layout.md",sourceDirName:"tutorial",slug:"/tutorial/layout",permalink:"/docs/tutorial/layout",draft:!1,editUrl:"https://github.com/centrifugal/centrifugal.dev/edit/main/docs/tutorial/layout.md",tags:[],version:"current",frontMatter:{id:"layout",sidebar_label:"App layout and behavior",title:"App layout and behavior"},sidebar:"Tutorial",previous:{title:"Real-time app from scratch",permalink:"/docs/tutorial/intro"},next:{title:"Setting up backend and database",permalink:"/docs/tutorial/backend"}},l={},c=[{value:"App screens",id:"app-screens",level:2},{value:"Login Screen",id:"login-screen",level:3},{value:"Chat Room List Screen",id:"chat-room-list-screen",level:3},{value:"Chat Room Search Screen",id:"chat-room-search-screen",level:3},{value:"Chat Room Detail Screen",id:"chat-room-detail-screen",level:3},{value:"2-column layout in mind",id:"2-column-layout-in-mind",level:2}],u={toc:c};function h(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,r.Z)({},u,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Before we start, we would like the reader to be more familiar with the layout and behavior of the application we are creating here. Let's look at it screen by screen, describe the behavior, and explain which parts will be endowed with real-time superpowers."),(0,n.kt)("h2",{id:"app-screens"},"App screens"),(0,n.kt)("p",null,"We tried to find a good balance which screens to include into the app. The goal was to keep the result minimal while still showcasing the ideas covered in the tutorial. Our completed app consists of four screens."),(0,n.kt)("h3",{id:"login-screen"},"Login Screen"),(0,n.kt)("p",null,"One of the goals for the tutorial is showing the app with user authentication. To show how to tell Centrifugo which user connects and build permissions for channels around the particular user."),(0,n.kt)("p",null,"Nothing too special here \u2013 we will use native Django user/password authentication. Django already has built-in User model and functions to support user login/logout workflow. So we just use this.\n",(0,n.kt)("img",{src:o(54853).Z,width:"2098",height:"1554"}),"\nThis screen does not include any real-time features. As soon as user logs into the app with its username/password pair we see the Chat Room List Screen."),(0,n.kt)("h3",{id:"chat-room-list-screen"},"Chat Room List Screen"),(0,n.kt)("p",null,"This one shows rooms current user joined. So user can click on any to go to Chat Room Detail Screen.\n",(0,n.kt)("img",{src:o(95141).Z,width:"2098",height:"1554"}),"\nThis screen includes a couple of elements to emphasize. First one is a green circle on top right. This is a Centrifugo real-time subscription status. As soon as user connected to Centrifugo and subscribed to the personal message stream (personal channel) - the indicator is green \ud83d\udfe2. Otherwise - it's red \ud83d\udd34."),(0,n.kt)("p",null,"The next element - the number of ",(0,n.kt)("del",{parentName:"p"},"cats")," users who joined the specific room. This counter is synchronized in real-time. For example, if someone joins the room from Chat Room Search Screen (at which we will look shortly) \u2013 the counter will be instantly synchronized. We also automatically add/remove rooms if current user joins/leaves some room from within Chat Room Search Screen opened in another browser tab or another device."),(0,n.kt)("p",null,"For every room we show the beginning of the last message sent to the room. Upon receiving real-time message we re-order rooms to put the one with latest message on top."),(0,n.kt)("h3",{id:"chat-room-search-screen"},"Chat Room Search Screen"),(0,n.kt)("p",null,"This screen allows the user to discover new rooms to join. In our app we decided to not provide a functionality for the user to create chat rooms. Rooms must be pre-created by admin \u2013 it's actually possible to do using Django built-in admin web UI - so to keep tutorial shorter (not the ideal justification for this tutorial which is freaking large) we decided to skip it for now.\n",(0,n.kt)("img",{src:o(15919).Z,width:"2098",height:"1554"}),"\nWe distinguish rooms current user joined or not joined by using color scheme. The information about current user membership is synchronized between browser tabs and different devices. After user joins the room \u2013 it appears on Chat Room List Screen on every user's device."),(0,n.kt)("h3",{id:"chat-room-detail-screen"},"Chat Room Detail Screen"),(0,n.kt)("p",null,"Finally, a page with room name, list of messages and a possibility to send a new one:\n",(0,n.kt)("img",{src:o(96529).Z,width:"2098",height:"1554"}),"\nOf course messages are sent in real-time to all users participating in chat. Also, the counter with number of users right to the room name is also updated in real-time."),(0,n.kt)("h2",{id:"2-column-layout-in-mind"},"2-column layout in mind"),(0,n.kt)("p",null,"Often in messenger apps you can see the layout where a list of chats is the left column, and chat details shown on the right. Like this one in Slack:"),(0,n.kt)("p",null,(0,n.kt)("img",{parentName:"p",src:"https://www.cnet.com/a/img/hub/2023/08/08/f4e09832-9f2b-4967-ac66-53fc8dfc6588/slack-redesign-2023-before-home.png",alt:"TBD"})),(0,n.kt)("p",null,"While we use a slightly simplified layout in the app with a separate chat room list and chat detail screens (more often seen on mobile devices), we keep in mind the possibility to switch to the 2-column layout if needed - just with a change of React component arrangement and some CSS. With our implementation user may be theoretically a member of hundreds or thousands of rooms and receive updates from all of them on one screen. Like in Telegram, Discord or Slack messengers."),(0,n.kt)("p",null,"This predetermined the fact we are using individual user channels in the app to receive real-time updates from all the rooms, instead of subscribing to each individual chat room channel. We will talk about this decision later, for now let's say simply: using individual real-time channels drastically simplifies frontend implementation, leaving the complexity for the backend side."))}h.isMDXComponent=!0},54853:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/grand-chat-login-47d4c7601d8afc0dd410bad433782350.png"},96529:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/grand-chat-room-detail-e730c799ba078cd94edd8914f4073b22.png"},95141:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/grand-chat-room-list-f08bcbf77fd6862c2b572fe906cac3f5.png"},15919:(e,t,o)=>{o.d(t,{Z:()=>r});const r=o.p+"assets/images/grand-chat-search-e4d2b0e435cedbc7e74a051095740b8e.png"}}]);